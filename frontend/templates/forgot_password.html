{% extends "base.html" %} {% block content %}
<div
  style="
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 60vh;
  "
>
  <div class="panel" style="max-width: 400px; width: 100%">
    <div id="reset-form-container">
      <h2 style="text-align: center">Forgot Your Password?</h2>
      <p>
        Enter your email address below and we'll send you a link to reset your
        password.
      </p>
      <form id="forgot-password-form">
        <div class="form-group" style="margin-bottom: 15px">
          <label for="email" style="display: block; margin-bottom: 5px"
            >Email Address</label
          >
          <input
            name="email"
            id="email"
            class="input"
            type="email"
            required
            style="width: 100%"
          />
        </div>
        <button
          class="btn btn-yellow"
          type="submit"
          style="width: 100%; padding: 12px; font-size: 16px"
        >
          Send Reset Link
        </button>
      </form>
    </div>
    <div id="confirmation-message" style="display: none; text-align: center">
      <h2 style="color: #92f394">âœ“ Request Sent</h2>
      <p>
        If an account with that email exists, a password reset link has been
        sent.
      </p>
      <a
        href="{{ url_for('auth.login') }}"
        class="btn btn-outline"
        style="margin-top: 15px"
        >Return to Login</a
      >
    </div>
  </div>
</div>
{% endblock %} {% block scripts %}
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const form = document.getElementById("forgot-password-form");
    const formContainer = document.getElementById("reset-form-container");
    const confirmationMessage = document.getElementById("confirmation-message");

    form.addEventListener("submit", (event) => {
      event.preventDefault();
      const email = document.getElementById("email").value;

      // You can add basic email validation here if you want

      fetch("{{ url_for('auth.forgot_password') }}", {
        method: "POST",
        headers: {
          "Content-Type": "application/x-www-form-urlencoded",
        },
        body: new URLSearchParams({
          email: email,
        }),
      })
        .then((response) => {
          // We don't need to check the response, just that the request was successful
          formContainer.style.display = "none";
          confirmationMessage.style.display = "block";
        })
        .catch((error) => {
          // Even if there's an error, we can still show the same message
          // to prevent any potential information leaks.
          console.error("Error submitting form:", error);
          formContainer.style.display = "none";
          confirmationMessage.style.display = "block";
        });
    });
  });
</script>
{% endblock %}
